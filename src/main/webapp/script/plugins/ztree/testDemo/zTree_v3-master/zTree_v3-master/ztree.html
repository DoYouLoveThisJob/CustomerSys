<!DOCTYPE html>
<HTML>
 <HEAD>
  <TITLE> ZTREE DEMO </TITLE>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
 <!--  <link rel="stylesheet" href="css/demoStyle/demo.css" type="text/css"> -->
  <link rel="stylesheet" href="css/zTreeStyle/zTreeStyle.css" type="text/css">
  <script type="text/javascript" src="js/jquery-1.4.4.min.js"></script>
  <script type="text/javascript" src="js/jquery.ztree.all.js"></script>
  <SCRIPT LANGUAGE="JavaScript">

  // $.ajax({
  //  method: "POST",
  //  url: "http://localhost:8080/test/getZtreeNodes.action",
  //  dataType: 'jsonp',//加入这个选项即可
  //  data:{},
  //   jsonpCallback:"jsonpCallback",
  //  beforeSend: function (xhr) {
  //  	//alert(1);
  //  },
  //  success: function (response) {
  //  alert(response);
  //  },
  //  error: function (jqXHR, textStatus, errorThrown) {
  //  	//alert(3);
  //  }
  // });
  // function jsonpCallback(response){
  // 	alert(response);
  // }
 


   var zTreeObj;
   // zTree 的参数配置，深入使用请参考 API 文档（setting 配置详解）
   var setting = {
   	async: {
		enable: true,
		url: "http://localhost:8080/test/getZtreeNodes.action",
		contentType: "application/json;charset=UTF-8",
		type: "get",
		dataType: 'jsonp'
	},
   	check: {
		enable: true,
		autoCheckTrigger: true
	},
		data: {
				simpleData: {
					enable: true,
					idKey: "id",
					pIdKey: "pId",
					rootPId: 0
				}
			}
		,
		callback: {
		onAsyncSuccess: zTreeOnAsyncSuccess
	}
   };
   function zTreeOnAsyncSuccess(event, treeId, treeNode, msg) {
     zTreeObj.expandAll(true);
   //alert(treeId);
  };

   // zTree 的数据属性，深入使用请参考 API 文档（zTreeNode 节点数据详解）
   // var zNodes = [
   // {name:"test1", open:true, children:[
   //    {name:"test1_1"}, {name:"test1_2"}]},
   // {name:"test2", open:true, children:[
   //    {name:"test2_1"}, {name:"test2_2"}]}
   // ];
	var zNodes = [
		{id:1, pId:0, name: "父节点1",isParent:true,open:false,checked:true},
		{id:11, pId:1, name: "子节点1",isParent:false},
		{id:12, pId:1, name: "子节点2",isParent:false}
	];

   $(document).ready(function(){
      zTreeObj = $.fn.zTree.init($("#treeDemo"), setting, null);
      
   });
  </SCRIPT>
 </HEAD>
<BODY>
<div>
   <ul id="treeDemo" class="ztree"></ul>
</div>
</BODY>
</HTML>